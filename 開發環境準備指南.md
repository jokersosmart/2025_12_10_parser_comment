# 開發環境準備指南

**建立日期**: 2025-11-19  
**目的**: 協助開發者完成所有前置準備，確保能順利開始編碼

---

## 📋 準備清單總覽

- [ ] **步驟 1**: 申請 Meta 開發者帳號（15 分鐘）
- [ ] **步驟 2**: 建立應用程式並取得 API Token（30 分鐘）
- [ ] **步驟 3**: 安裝開發工具（20 分鐘）
- [ ] **步驟 4**: 驗證開發環境（10 分鐘）
- [ ] **步驟 5**: 初始化專案（15 分鐘）

**預計總時間**: 1.5 小時

---

## 🔑 步驟 1: 申請 Meta 開發者帳號

### 1.1 註冊 Meta for Developers

**網址**: https://developers.facebook.com/

**步驟**:
1. 點擊右上角「開始使用」或「登入」
2. 使用您的 Facebook 帳號登入
3. 首次登入會要求：
   - ✅ 接受開發者條款
   - ✅ 驗證電子郵件
   - ✅ 提供開發者資訊（姓名、國家）

**完成時間**: ~5 分鐘

**驗證**: 看到 Meta for Developers 主控台

---

### 1.2 完成身分驗證（建議）

**原因**: 部分 API 功能需要驗證身分

**步驟**:
1. 前往「設定」→「基本」
2. 新增手機號碼驗證
3. 完成雙重驗證（2FA）

**完成時間**: ~10 分鐘

---

## 🚀 步驟 2: 建立應用程式並取得 API Token

### 2.1 建立新應用程式

**步驟**:
1. 在 Meta for Developers 主控台
2. 點擊「我的應用程式」→「建立應用程式」
3. 選擇應用程式類型：**「其他」** 或 **「商業」**
4. 填寫資訊：
   - **顯示名稱**: 社群留言爬蟲工具
   - **應用程式聯絡電子郵件**: [您的email]
   - **商業帳號**: 個人或公司（選擇適用的）

**完成**: 點擊「建立應用程式」

**完成時間**: ~5 分鐘

---

### 2.2 新增 Instagram 產品

**步驟**:
1. 在應用程式控制面板
2. 找到「產品」→「新增產品」
3. 找到「Instagram」→ 點擊「設定」
4. 選擇「Instagram Basic Display」（基本顯示）

**完成時間**: ~2 分鐘

---

### 2.3 新增 Facebook 產品（Login）

**步驟**:
1. 「產品」→「新增產品」
2. 找到「Facebook Login」→ 點擊「設定」
3. 選擇平台：**「Web」**

**完成時間**: ~2 分鐘

---

### 2.4 取得 App Access Token

這是最關鍵的步驟！

#### 方法 1: 使用 Graph API Explorer（推薦，最簡單）

**步驟**:
1. 前往 Graph API Explorer: https://developers.facebook.com/tools/explorer/
2. 在右上角「Meta App」下拉選單，選擇您剛建立的應用程式
3. 在「User or Page」下拉選單，選擇「Get App Token」
4. 點擊「Generate Access Token」
5. **複製 Token**（會是一長串字元，例如：`1234567890|ABCDefgh...`）

**⚠️ 重要**: 
- 這個 Token 是 **App Access Token**（應用程式層級）
- 格式為：`{app-id}|{app-secret}` 或長字串
- 永久有效（除非重設 app secret）
- 妥善保管，不可公開

#### 方法 2: 使用 API 請求

```bash
# 在您的應用程式控制面板取得
# App ID: 在「設定」→「基本」
# App Secret: 在「設定」→「基本」（點擊「顯示」）

# 使用 curl 取得 Token
curl -X GET "https://graph.facebook.com/oauth/access_token?client_id=YOUR_APP_ID&client_secret=YOUR_APP_SECRET&grant_type=client_credentials"

# 回應會包含 access_token
{
  "access_token": "YOUR_APP_ACCESS_TOKEN",
  "token_type": "bearer"
}
```

**完成時間**: ~5 分鐘

---

### 2.5 申請必要的權限

#### Instagram 權限

**需要的權限**:
- `instagram_basic` - 基本資料存取
- `instagram_manage_comments` - 留言管理

**申請步驟**:
1. 應用程式控制面板 →「應用程式審查」→「權限和功能」
2. 找到「Instagram Basic Display」→ 點擊「申請」
3. 填寫申請表：
   - **用途說明**: 「本工具用於商業分析，協助企業收集公開貼文的客戶留言，進行意見分析和客服追蹤」
   - **使用場景**: 「操作人員輸入公開貼文網址，系統爬取留言並提供編輯和匯出功能」
   - **隱私政策**: [需提供 URL，見下方]
   - **使用條款**: [需提供 URL，見下方]

**審核時間**: 3-5 個工作天（有時更快）

#### Facebook 權限

**需要的權限**:
- `pages_read_engagement` - 讀取粉絲專頁互動

**申請步驟**: 同上

---

### 2.6 準備隱私政策和使用條款（必要！）

Meta 要求所有應用程式提供這兩份文件。

#### 快速方案：使用範本

**隱私政策範本** (privacy-policy.html):
```html
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>隱私權政策 - 社群留言爬蟲工具</title>
</head>
<body>
    <h1>隱私權政策</h1>
    <p>最後更新：2025-11-19</p>
    
    <h2>資料收集</h2>
    <p>本工具透過 Instagram 和 Facebook 官方 API 收集公開貼文的留言資料，包括：</p>
    <ul>
        <li>留言者公開顯示名稱</li>
        <li>留言內容</li>
        <li>留言時間</li>
        <li>公開的互動數據（按讚數、回覆數）</li>
    </ul>
    
    <h2>資料使用</h2>
    <p>收集的資料僅用於：</p>
    <ul>
        <li>顯示給使用者進行分析</li>
        <li>儲存在使用者瀏覽器本地（IndexedDB）</li>
        <li>匯出為 Excel 檔案</li>
    </ul>
    
    <h2>資料儲存</h2>
    <p>所有資料儲存在使用者瀏覽器本地，我們不會：</p>
    <ul>
        <li>將資料傳送到我們的伺服器</li>
        <li>分享資料給第三方</li>
        <li>用於廣告或行銷目的</li>
    </ul>
    
    <h2>資料刪除</h2>
    <p>使用者可隨時在工具中刪除已爬取的資料，或清除瀏覽器資料。</p>
    
    <h2>聯絡方式</h2>
    <p>如有任何問題，請聯繫：[您的email]</p>
</body>
</html>
```

**使用條款範本** (terms-of-service.html):
```html
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>使用條款 - 社群留言爬蟲工具</title>
</head>
<body>
    <h1>使用條款</h1>
    <p>最後更新：2025-11-19</p>
    
    <h2>服務說明</h2>
    <p>本工具協助使用者收集 Instagram 和 Facebook 公開貼文的留言資料，供合法商業分析使用。</p>
    
    <h2>使用限制</h2>
    <ul>
        <li>僅可爬取完全公開的貼文和留言</li>
        <li>不得用於違法或侵犯他人權益的用途</li>
        <li>遵守 Instagram 和 Facebook 的服務條款</li>
        <li>尊重留言內容的著作權</li>
    </ul>
    
    <h2>免責聲明</h2>
    <p>本工具「按現狀」提供，不保證：</p>
    <ul>
        <li>服務不中斷或無錯誤</li>
        <li>API 持續可用</li>
        <li>資料完全準確</li>
    </ul>
    
    <h2>變更條款</h2>
    <p>我們保留隨時修改這些條款的權利。</p>
</body>
</html>
```

**部署這兩個檔案**:
- 上傳到任何公開可存取的網站（例如：GitHub Pages）
- 取得 URL（例如：https://yourusername.github.io/privacy-policy.html）
- 在 Meta 應用程式設定中填入這些 URL

---

### 2.7 等待審核（同時可以繼續其他準備）

**審核中可以做什麼**:
- ✅ 使用測試 Token 開發（受限功能）
- ✅ 設置開發環境
- ✅ 實作前端 UI
- ✅ 建立 Mock API 進行測試

---

## 💻 步驟 3: 安裝開發工具

### 3.1 檢查 Node.js

```powershell
# 檢查是否已安裝
node --version
npm --version

# 應該顯示：
# v18.x.x 或更高
# 9.x.x 或更高
```

**如果未安裝**:
1. 下載 Node.js: https://nodejs.org/（選擇 LTS 版本）
2. 執行安裝程式
3. 重新開啟 PowerShell
4. 再次檢查版本

**完成時間**: ~5 分鐘（若需安裝則 10 分鐘）

---

### 3.2 安裝 pnpm（推薦，比 npm 快 2 倍）

```powershell
# 安裝 pnpm
npm install -g pnpm

# 驗證安裝
pnpm --version
# 應顯示：8.x.x 或更高
```

**完成時間**: ~2 分鐘

---

### 3.3 安裝 Vercel CLI

```powershell
# 全域安裝
npm install -g vercel

# 驗證
vercel --version

# 登入 Vercel
vercel login
# 選擇登入方式（GitHub/Email）
```

**完成時間**: ~5 分鐘

---

### 3.4 安裝 VS Code 擴充套件

**必要擴充套件**:
1. **ESLint** - dbaeumer.vscode-eslint
2. **Prettier** - esbenp.prettier-vscode
3. **TypeScript Vue Plugin** - Vue.volar
4. **Tailwind CSS IntelliSense** - bradlc.vscode-tailwindcss

**推薦擴充套件**:
5. Error Lens - usernamehw.errorlens
6. GitLens - eamodio.gitlens
7. Auto Rename Tag - formulahendry.auto-rename-tag
8. Path Intellisense - christian-kohler.path-intellisense

**安裝方式**:
```
1. 開啟 VS Code
2. 按 Ctrl+Shift+X 開啟擴充套件面板
3. 搜尋並安裝上述擴充套件
```

**完成時間**: ~5 分鐘

---

### 3.5 安裝 Git（如果尚未安裝）

```powershell
# 檢查 Git
git --version

# 如果未安裝：
# 下載：https://git-scm.com/download/win
# 安裝後重新開啟 PowerShell
```

**完成時間**: ~3 分鐘

---

## ✅ 步驟 4: 驗證開發環境

執行以下檢查清單：

```powershell
# 1. Node.js 版本檢查
node --version
# ✅ 應顯示：v18.0.0 或更高

# 2. npm 版本檢查
npm --version
# ✅ 應顯示：9.0.0 或更高

# 3. pnpm 檢查
pnpm --version
# ✅ 應顯示：8.0.0 或更高

# 4. Vercel CLI 檢查
vercel --version
# ✅ 應顯示：Vercel CLI 32.x.x 或更高

# 5. Git 檢查
git --version
# ✅ 應顯示：git version 2.x.x 或更高

# 6. Git 編碼檢查
git config --get core.quotepath
# ✅ 應顯示：false

# 7. PowerShell 編碼檢查
[Console]::OutputEncoding.EncodingName
# ✅ 應顯示：Unicode (UTF-8)

# 8. 瀏覽器檢查
# ✅ 確認有 Chrome 90+ 或 Edge 90+
```

**如果全部 ✅ 通過**：環境準備完成！

**如果有 ❌ 失敗**：
- Node.js: 重新安裝 https://nodejs.org/
- 編碼: 執行 `.\fix-encoding.ps1`（在 Cursor 專案根目錄）
- Vercel: 重新執行 `npm install -g vercel`

---

## 🛠️ 步驟 5: 初始化專案

### 5.1 初始化 Git

```powershell
# 確認在專案目錄
cd C:\Users\user\Desktop\Cursor\social-comment-scraper

# 初始化 Git
git init

# 設定遠端倉庫（關聯到主倉庫的子專案或新倉庫）
# 選項 A: 建立新倉庫
# 在 GitHub 建立新倉庫：social-comment-scraper
# git remote add origin https://github.com/jokersosmart/social-comment-scraper.git

# 選項 B: 使用 submodule（整合到主專案）
# 在主專案目錄執行
# git submodule add https://github.com/jokersosmart/social-comment-scraper.git social-comment-scraper
```

---

### 5.2 初始化前端專案（T002）

```powershell
# 使用 Vite 建立 React + TypeScript 專案
pnpm create vite frontend --template react-ts

# 進入前端目錄
cd frontend

# 安裝依賴
pnpm install

# 安裝專案必要的套件
pnpm add dexie
pnpm add ag-grid-react ag-grid-community
pnpm add xlsx
pnpm add date-fns
pnpm add axios
pnpm add react-hot-toast
pnpm add -D tailwindcss postcss autoprefixer
pnpm add -D @types/node

# 初始化 Tailwind CSS
pnpm dlx tailwindcss init -p

# 測試執行
pnpm dev
# 應開啟 http://localhost:5173
```

**完成時間**: ~10 分鐘

---

### 5.3 設定環境變數

```powershell
# 回到專案根目錄
cd ..

# 建立 .env.local 檔案
@"
# Instagram API
INSTAGRAM_APP_TOKEN=your_instagram_token_here

# Facebook API
FACEBOOK_APP_TOKEN=your_facebook_token_here

# 速率限制設定
RATE_LIMIT_MAX_CALLS=180
RATE_LIMIT_WINDOW_MS=3600000

# 環境
NODE_ENV=development
"@ | Out-File -FilePath .env.local -Encoding UTF8

# 建立 .env.example（不含真實 Token）
@"
# Instagram API
INSTAGRAM_APP_TOKEN=

# Facebook API
FACEBOOK_APP_TOKEN=

# 速率限制設定
RATE_LIMIT_MAX_CALLS=180
RATE_LIMIT_WINDOW_MS=3600000

# 環境
NODE_ENV=development
"@ | Out-File -FilePath .env.example -Encoding UTF8

Write-Host "✅ 環境變數檔案已建立" -ForegroundColor Green
Write-Host "⚠️  請編輯 .env.local 填入您的 API Tokens" -ForegroundColor Yellow
```

**重要**: 
- 將步驟 2.4 取得的 Token 填入 `.env.local`
- **不要** commit `.env.local`（已在 .gitignore 中）

---

### 5.4 建立 .gitignore

```powershell
@"
# Dependencies
node_modules/
.pnpm-store/

# Environment
.env
.env.local
.env.*.local

# Build
dist/
build/
.vercel/

# IDE
.vscode/
.idea/
*.swp
*.swo

# OS
.DS_Store
Thumbs.db

# Logs
*.log
logs/

# Testing
coverage/
.nyc_output/

# Misc
*.tsbuildinfo
.cache/
"@ | Out-File -FilePath .gitignore -Encoding UTF8

Write-Host "✅ .gitignore 已建立" -ForegroundColor Green
```

---

## 🧪 步驟 6: 測試 API 連線

### 6.1 測試 Instagram API

使用 Graph API Explorer 或 curl 測試：

```bash
# 替換 YOUR_TOKEN 和 MEDIA_ID
curl "https://graph.facebook.com/v18.0/MEDIA_ID/comments?access_token=YOUR_TOKEN&fields=id,username,text,timestamp&limit=5"
```

**測試用公開貼文**（可以先找一個簡單的公開貼文測試）

**預期回應**:
```json
{
  "data": [
    {
      "id": "...",
      "username": "...",
      "text": "...",
      "timestamp": "..."
    }
  ]
}
```

**如果出現錯誤**:
- `190`: Token 無效 → 重新取得 Token
- `100`: 參數錯誤 → 檢查 MEDIA_ID 格式
- `803`: 無法存取 → 確認貼文為公開

---

### 6.2 測試 Facebook API

```bash
# 替換 YOUR_TOKEN 和 POST_ID
curl "https://graph.facebook.com/v18.0/POST_ID/comments?access_token=YOUR_TOKEN&fields=id,from,message,created_time&limit=5"
```

**預期回應**: 類似 Instagram

---

## 📝 步驟 7: 建立初始 Commit

```powershell
# 確認在專案根目錄
cd C:\Users\user\Desktop\Cursor\social-comment-scraper

# 添加所有檔案
git add .

# 初始 commit
git commit -m "chore: 初始化專案結構

- 建立 frontend（React + TypeScript + Vite）
- 建立 api 目錄（準備 Serverless Functions）
- 設定環境變數範本
- 建立 .gitignore

準備開始實作 Phase 1 任務"

# 推送（如果已設定遠端）
git push -u origin main
```

---

## ✅ 完成檢查清單

在開始編碼前，確認以下全部完成：

### Meta API 準備
- [ ] ✅ Meta 開發者帳號已註冊
- [ ] ✅ 應用程式已建立
- [ ] ✅ Instagram 產品已新增
- [ ] ✅ Facebook Login 已新增
- [ ] ✅ App Access Token 已取得並複製
- [ ] ✅ 隱私政策和使用條款已準備
- [ ] ⏳ 權限申請已提交（等待審核，3-5 天）
- [ ] ⏳ API 測試成功（取得留言資料）

### 開發環境
- [ ] ✅ Node.js 18+ 已安裝
- [ ] ✅ pnpm 已安裝
- [ ] ✅ Vercel CLI 已安裝並登入
- [ ] ✅ Git 已安裝
- [ ] ✅ VS Code 和擴充套件已安裝
- [ ] ✅ 中文編碼已修復（無亂碼）

### 專案初始化
- [ ] ✅ 專案目錄已建立
- [ ] ✅ Git 已初始化
- [ ] ✅ Frontend 專案已建立（Vite + React）
- [ ] ✅ 環境變數已設定（.env.local）
- [ ] ✅ .gitignore 已建立
- [ ] ✅ 初始 commit 已完成

### 文件就緒
- [ ] ✅ tasks.md 已閱讀（知道要做什麼）
- [ ] ✅ quickstart.md 已閱讀（知道如何做）
- [ ] ✅ plan.md 已理解（知道為什麼這樣做）

---

## 🚀 準備開始編碼！

**如果上述清單全部 ✅**:

🎉 **恭喜！您已完全準備好開始開發了！**

**下一步**:
```
按照 tasks.md 執行：
- T001-T010: Setup（可全部並行）
- T011-T035: Foundation（核心基礎設施）
- T036-T053: US1（MVP）
```

---

## 🆘 常見問題

### Q1: API 審核需要多久？
**A**: 通常 3-5 個工作天，最快可能 24 小時內通過

### Q2: 審核期間可以開發嗎？
**A**: 可以！使用 Mock API（MSW）或測試 Token 開發前端，API 通過後再整合

### Q3: 沒有公司可以申請嗎？
**A**: 可以！個人開發者也能申請，說明用途為「學習」或「個人專案」即可

### Q4: Token 如何保管？
**A**: 
- ✅ 存在 `.env.local`（不 commit）
- ✅ 生產環境存在 Vercel 環境變數
- ❌ 絕對不要 commit 到 Git
- ❌ 絕對不要公開分享

### Q5: 如果 API 申請被拒絕？
**A**: 
- 補充更詳細的用途說明
- 確保隱私政策和使用條款完整
- 可申請複審
- 備案：使用 Mock 資料開發，部署內部使用版本

---

## 📞 取得協助

**API 相關問題**:
- Meta 開發者社群：https://developers.facebook.com/community/

**技術問題**:
- 查看 quickstart.md 除錯指南
- 查看 research.md 技術決策

**專案問題**:
- 參考 History.md 查看所有決策記錄
- 參考 comprehensive.md 品質標準

---

**準備指南版本**: 1.0  
**最後更新**: 2025-11-19

🎯 **準備好了就開始編碼吧！祝開發順利！**

